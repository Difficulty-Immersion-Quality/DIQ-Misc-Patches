// ==================================== First Vampire Warlock - Drain Life ====================================
// TODO: Fix container stuff

new entry "DrainLife"
type "PassiveData"
using "DrainLife"
// Drain Life
// data "DisplayName" "hab039ac2ge8c1g434cga778gb6a8266c07a9;1"
// When you attack or cast a spell, you can make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against a creature on the same turn, dealing [1]. You may expend a &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to deal extra damage and regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h86d62caega5cag4bddga770gb3ce30181403;1"
// When you attack or cast a spell, you can cast &lt;LSTag Type="Spell" Tooltip="Target_DrainLife_Base"&gt;Drain Life&lt;/LSTag&gt; until the end of your turn.
data "Description" "hf29194a6g5f46g4ae6g96d9gec912337bc90;1"
// data "DescriptionParams" "DealDamage(1d6+CharismaModifier,Necrotic)"
// data "Icon" "Icon_DrainLifePassive"
// data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_DrainLife_Base,AddChildren,e9127b70-22b7-42a1-b172-d02f828f260a)"
// data "StatsFunctorContext" "OnAttack;OnCast"
// data "Conditions" "IsAttack() or IsSpell()"
// data "StatsFunctors" "IF(ClassLevelHigherOrEqualThan(1,'Warlock') and not ClassLevelHigherOrEqualThan(3,'Warlock')):ApplyStatus(SELF,DRAIN_LIFE_TECHNICAL_1,100,1);IF(ClassLevelHigherOrEqualThan(3,'Warlock') and not ClassLevelHigherOrEqualThan(5,'Warlock')):ApplyStatus(SELF,DRAIN_LIFE_TECHNICAL_2,100,1);IF(ClassLevelHigherOrEqualThan(5,'Warlock') and not ClassLevelHigherOrEqualThan(7,'Warlock')):ApplyStatus(SELF,DRAIN_LIFE_TECHNICAL_3,100,1);IF(ClassLevelHigherOrEqualThan(7,'Warlock') and not ClassLevelHigherOrEqualThan(9,'Warlock')):ApplyStatus(SELF,DRAIN_LIFE_TECHNICAL_4,100,1);IF(ClassLevelHigherOrEqualThan(9,'Warlock') and not HasStatus('ETERNAL_NIGHT',context.Source)):ApplyStatus(SELF,DRAIN_LIFE_TECHNICAL_5,100,1)"
data "StatsFunctors" "IF(not HasPassive('EternalNightDrainLife')):ApplyStatus(SELF,GOON_DRAIN_LIFE_TECHNICAL,100,1)"

new entry "GOON_DRAIN_LIFE_TECHNICAL"
type "StatusData"
data "StatusType" "BOOST"
using "DRAIN_LIFE_TECHNICAL_1"
// When you attack or cast a spell, you can cast &lt;LSTag Type="Spell" Tooltip="Target_DrainLife_Base"&gt;Drain Life&lt;/LSTag&gt; until the end of your turn.
data "Description" "hf29194a6g5f46g4ae6g96d9gec912337bc90;1"
data "Boosts" "UnlockSpellVariant(SpellId('Target_DrainLife_Base'), ModifyIconGlow())"
data "RemoveConditions" "SpellId('Target_DrainLife_Base') or SpellId('Target_DrainLife_1') or SpellId('Target_DrainLife_2') or SpellId('Target_DrainLife_3') or SpellId('Target_DrainLife_4') or SpellId('Target_DrainLife_5') or SpellId('Target_DrainLife_6') or SpellId('Target_DrainLife_7') or SpellId('Target_DrainLife_8') or SpellId('Target_DrainLife_9') or SpellId('Target_DrainLife_EternalNight') or SpellId('Target_DrainLife_EternalNight_1') or SpellId('Target_DrainLife_EternalNight_2') or SpellId('Target_DrainLife_EternalNight_3') or SpellId('Target_DrainLife_EternalNight_4') or SpellId('Target_DrainLife_EternalNight_5') or SpellId('Target_DrainLife_EternalNight_6') or SpellId('Target_DrainLife_EternalNight_7') or SpellId('Target_DrainLife_EternalNight_8') or SpellId('Target_DrainLife_EternalNight_9')"

// new entry "DRAIN_LIFE_TECHNICAL_1"
// type "StatusData"
// data "StatusType" "BOOST"
// Drain Life
// data "DisplayName" "hab039ac2ge8c1g434cga778gb6a8266c07a9;1"
// When you hit a creature with your &lt;LSTag Type="Spell" Tooltip="Target_DrainLife"&gt;Drain Life&lt;/LSTag&gt; feature, you can expend a Warlock &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to deal an extra [1] to the target plus another [1] per level of the spell slot. When you expend a spell slot to enhance the attack in this way, you regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h4cad484dga543g4685g8e4dg4bd17841a662;1"
// data "DescriptionParams" "DealDamage(1d8,Necrotic)"
// data "Icon" "Icon_DrainLifePassive"
// data "StackId" "DRAIN_LIFE_TECHNICAL"
// data "Boosts" "UnlockSpell(Target_DrainLife_Base);UnlockSpell(Target_DrainLife_1)"
// data "TickType" "EndTurn"
// data "RemoveEvents" "OnSpellCast"
// data "RemoveConditions" "SpellId('Target_DrainLife_Base') or SpellId('Target_DrainLife_1') or SpellId('Target_DrainLife_2') or SpellId('Target_DrainLife_3') or SpellId('Target_DrainLife_4') or SpellId('Target_DrainLife_5') or SpellId('Target_DrainLife_EternalNight')"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
// data "StatusGroups" "SG_RemoveOnRespec"

// new entry "DRAIN_LIFE_TECHNICAL_2"
// type "StatusData"
// data "StatusType" "BOOST"
// using "DRAIN_LIFE_TECHNICAL_1"
// data "Boosts" "UnlockSpell(Target_DrainLife_Base);UnlockSpell(Target_DrainLife_2)"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
// data "StatusGroups" "SG_RemoveOnRespec"

// new entry "DRAIN_LIFE_TECHNICAL_3"
// type "StatusData"
// data "StatusType" "BOOST"
// using "DRAIN_LIFE_TECHNICAL_1"
// data "Boosts" "UnlockSpell(Target_DrainLife_Base);UnlockSpell(Target_DrainLife_3)"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
// data "StatusGroups" "SG_RemoveOnRespec"

// new entry "DRAIN_LIFE_TECHNICAL_4"
// type "StatusData"
// data "StatusType" "BOOST"
// using "DRAIN_LIFE_TECHNICAL_1"
// data "Boosts" "UnlockSpell(Target_DrainLife_Base);UnlockSpell(Target_DrainLife_4)"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
// data "StatusGroups" "SG_RemoveOnRespec"

// new entry "DRAIN_LIFE_TECHNICAL_5"
// type "StatusData"
// data "StatusType" "BOOST"
// using "DRAIN_LIFE_TECHNICAL_1"
// data "Boosts" "UnlockSpell(Target_DrainLife_Base);UnlockSpell(Target_DrainLife_5)"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
// data "StatusGroups" "SG_RemoveOnRespec"

new entry "Target_DrainLife_Base"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_Base"
data "Level" "0"
// data "TargetRadius" "1.5"
// data "SpellRoll" "Attack(AttackType.MeleeSpellAttack)"
// data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);IF(ClassLevelHigherOrEqualThan(10,'Warlock')):ApplyStatus(DRAINED_OF_LIFE,100,1)"
// data "RequirementConditions" "HasStatus('DRAIN_LIFE_TECHNICAL_1') or HasStatus('DRAIN_LIFE_TECHNICAL_2') or HasStatus('DRAIN_LIFE_TECHNICAL_3') or HasStatus('DRAIN_LIFE_TECHNICAL_4') or HasStatus('DRAIN_LIFE_TECHNICAL_5')"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
// data "TargetConditions" "not Self() and not Dead()"
data "TargetConditions" "not Self() and not Dead() and not Item() and not Tagged('CONSTRUCT') and Character()"
// data "Icon" "Icon_DrainLife"
// Drain Life
// data "DisplayName" "hab039ac2ge8c1g434cga778gb6a8266c07a9;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against the target. Expending a &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to use this feature causes the attack to deal an extra [1] to the target on a hit, plus another [1] per level of the spell slot. You regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h37619f93gd7eeg47f0g87b9geb65e502a75d;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against a living creature, dealing [1] and an additional [2] per level of the &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt; used. Additionally, when a spell slot is expended you regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
data "Description" "h7920dbeag0a12g4f2dgb671gf1d3ab30ba77;1"
// data "DescriptionParams" "DealDamage(1d8,Necrotic)"
data "DescriptionParams" "DealDamage(1d6+CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
// data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic)"
// data "CastTextEvent" "Cast"
// data "PrepareSound" "Spell_Prepare_Damage_Necrotic_ArmsOfHadar_L1to3"
// data "PrepareLoopSound" "Spell_Loop_Damage_Necrotic_ArmsOfHadar_L1to3"
// data "CastSound" "Spell_Cast_Damage_Necrotic_VampiricTouch_L4to5"
// data "TargetSound" "Spell_Impact_Damage_Necrotic_VampiricTouch_L4to5"
// data "VocalComponentSound" "Vocal_Component_DamageNecroticVamparic"
// data "UseCosts" "BonusActionPoint:1"
// data "SpellAnimation" "f94542d9-a79c-478a-92de-573cead9260e,,;,,;601180d2-6625-4674-ad3c-2f4a5076fe5f,,;afa318ee-741d-4f5c-b9f9-3131a5ecb2c8,,;bd339475-d2b5-46e8-8d0c-9f2ad6a91328,,;,,;7a28f440-1b0b-4a18-96a8-3767959b601a,,;,,;,,"
// data "VerbalIntent" "Damage"
// data "SpellFlags" "HasSomaticComponent;Temporary"
data "SpellFlags" "HasSomaticComponent;IsMelee;IsHarmful"
// data "SpellAnimationIntentType" "Aggressive"
// data "PrepareEffect" "c4b28ad0-5d3b-4f66-9f33-0d7c82217257"
// data "CastEffect" "4cab2089-4c14-44f6-9fe0-5421ec911552"
// data "TargetEffect" "f455729a-1c6d-4a9b-8a60-6a05ea057bb4"
// data "BeamEffect" "c6d17c32-998f-4323-93a7-040e4a042ef3"
// data "DamageType" "Necrotic"

new entry "Target_DrainLife_1"
type "SpellData"
data "SpellType" "Target"
// using "Target_DrainLife_Base"
using "Target_DrainLife_1"
data "Level" "1"
// data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(2d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone)"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(1d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone)"
// data "RequirementConditions" "HasActionResource('WarlockSpellSlot',1,1,false)"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
// Drain Life: 1st-Level Spell Slot
// data "DisplayName" "h4298ff36g254dg495dgbd7dg2b7cc54a6c8c;1"
// Drain Life
data "DisplayName" "hab039ac2ge8c1g434cga778gb6a8266c07a9;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against the target. Expending a &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to use this feature causes the attack to deal an extra [1] to the target on a hit, plus another [1] per level of the spell slot. You regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h37619f93gd7eeg47f0g87b9geb65e502a75d;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against a living creature, dealing [1] and an additional [2] per level of the &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt; used. Additionally, when a spell slot is expended you regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
data "Description" "h7920dbeag0a12g4f2dgb671gf1d3ab30ba77;1"
// data "DescriptionParams" "DealDamage(1d8,Necrotic)"
data "DescriptionParams" "DealDamage(1d6+CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
// Does not spend a &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt;.
// data "TooltipOnMiss" "4639a885-0f45-4bc9-93c7-1e0c39eb39ec"
// data "Icon" "Icon_DrainLifeSpellSlot"
// data "HitCosts" "SpellSlotsGroup:1:1:1"
// data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(2d8,Necrotic)"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
data "RootSpellID" "Target_DrainLife_Base"

new entry "Target_DrainLife_2"
type "SpellData"
data "SpellType" "Target"
// using "Target_DrainLife_1"
using "Target_DrainLife_2"
data "Level" "2"
// data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(3d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone)"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(2d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone)"
// data "RequirementConditions" "HasActionResource('WarlockSpellSlot',1,2,false)"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
// Drain Life: 2nd-Level Spell Slot
// data "DisplayName" "h79a50c7agc176g43b8gaf50g63607ca2c025;1"
// Drain Life
data "DisplayName" "hab039ac2ge8c1g434cga778gb6a8266c07a9;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against the target. Expending a &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to use this feature causes the attack to deal an extra [1] to the target on a hit, plus another [1] per level of the spell slot. You regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h37619f93gd7eeg47f0g87b9geb65e502a75d;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against a living creature, dealing [1] and an additional [2] per level of the &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt; used. Additionally, when a spell slot is expended you regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
data "Description" "h7920dbeag0a12g4f2dgb671gf1d3ab30ba77;1"
// data "DescriptionParams" "DealDamage(1d8,Necrotic)"
data "DescriptionParams" "DealDamage(1d6+CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
// Does not spend a &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt;.
// data "TooltipOnMiss" "4639a885-0f45-4bc9-93c7-1e0c39eb39ec"
// data "HitCosts" "SpellSlotsGroup:1:1:2"
// data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(3d8,Necrotic)"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(2d8,Necrotic)"
data "RootSpellID" "Target_DrainLife_Base"

new entry "Target_DrainLife_3"
type "SpellData"
data "SpellType" "Target"
// using "Target_DrainLife_1"
using "Target_DrainLife_3"
data "Level" "3"
// data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(4d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone)"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(3d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone)"
// data "RequirementConditions" "HasActionResource('WarlockSpellSlot',1,3,false)"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
// Drain Life: 3rd-Level Spell Slot
// data "DisplayName" "h4a8bf8b4ga55ag4189gbf73gf2aea21e68f2;1"
// Drain Life
data "DisplayName" "hab039ac2ge8c1g434cga778gb6a8266c07a9;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against the target. Expending a &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to use this feature causes the attack to deal an extra [1] to the target on a hit, plus another [1] per level of the spell slot. You regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h37619f93gd7eeg47f0g87b9geb65e502a75d;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against a living creature, dealing [1] and an additional [2] per level of the &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt; used. Additionally, when a spell slot is expended you regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
data "Description" "h7920dbeag0a12g4f2dgb671gf1d3ab30ba77;1"
// data "DescriptionParams" "DealDamage(1d8,Necrotic)"
data "DescriptionParams" "DealDamage(1d6+CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
// Does not spend a &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt;.
// data "TooltipOnMiss" "4639a885-0f45-4bc9-93c7-1e0c39eb39ec"
// data "HitCosts" "SpellSlotsGroup:1:1:3"
// data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(4d8,Necrotic)"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(3d8,Necrotic)"
data "RootSpellID" "Target_DrainLife_Base"

new entry "Target_DrainLife_4"
type "SpellData"
data "SpellType" "Target"
// using "Target_DrainLife_1"
using "Target_DrainLife_4"
data "Level" "4"
// data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(5d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone)"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(4d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone)"
// data "RequirementConditions" "HasActionResource('WarlockSpellSlot',1,4,false)"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
// Drain Life: 4th-Level Spell Slot
// data "DisplayName" "h0f612a00g0bf4g4882g818fg22fa7a20f5ec;1"
// Drain Life
data "DisplayName" "hab039ac2ge8c1g434cga778gb6a8266c07a9;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against the target. Expending a &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to use this feature causes the attack to deal an extra [1] to the target on a hit, plus another [1] per level of the spell slot. You regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h37619f93gd7eeg47f0g87b9geb65e502a75d;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against a living creature, dealing [1] and an additional [2] per level of the &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt; used. Additionally, when a spell slot is expended you regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
data "Description" "h7920dbeag0a12g4f2dgb671gf1d3ab30ba77;1"
// data "DescriptionParams" "DealDamage(1d8,Necrotic)"
data "DescriptionParams" "DealDamage(1d6+CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
// Does not spend a &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt;.
// data "TooltipOnMiss" "4639a885-0f45-4bc9-93c7-1e0c39eb39ec"
// data "HitCosts" "SpellSlotsGroup:1:1:4"
// data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(5d8,Necrotic)"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(4d8,Necrotic)"
data "RootSpellID" "Target_DrainLife_Base"

new entry "Target_DrainLife_5"
type "SpellData"
data "SpellType" "Target"
// using "Target_DrainLife_1"
using "Target_DrainLife_5"
data "Level" "5"
// data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(6d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone);ApplyStatus(DRAINED_OF_LIFE,100,1)"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(5d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone);ApplyStatus(DRAINED_OF_LIFE,100,1)"
// data "RequirementConditions" "HasActionResource('WarlockSpellSlot',1,5,false)"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
// Drain Life: 5th-Level Spell Slot
// data "DisplayName" "ha61db2d3gb36cg4ca8g8671g29f595d7c9a1;1"
// Drain Life
data "DisplayName" "hab039ac2ge8c1g434cga778gb6a8266c07a9;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against the target. Expending a &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to use this feature causes the attack to deal an extra [1] to the target on a hit, plus another [1] per level of the spell slot. You regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h37619f93gd7eeg47f0g87b9geb65e502a75d;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against a living creature, dealing [1] and an additional [2] per level of the &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt; used. Additionally, when a spell slot is expended you regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
data "Description" "h7920dbeag0a12g4f2dgb671gf1d3ab30ba77;1"
// data "DescriptionParams" "DealDamage(1d8,Necrotic)"
data "DescriptionParams" "DealDamage(1d6+CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
// Does not spend a &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt;.
// data "TooltipOnMiss" "4639a885-0f45-4bc9-93c7-1e0c39eb39ec"
// data "HitCosts" "SpellSlotsGroup:1:1:5"
// data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(6d8,Necrotic)"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(5d8,Necrotic)"
data "RootSpellID" "Target_DrainLife_Base"

new entry "Target_DrainLife_6"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_5"
data "Level" "6"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(6d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone);ApplyStatus(DRAINED_OF_LIFE,100,1)"
data "HitCosts" "SpellSlotsGroup:1:1:6"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(6d8,Necrotic)"

new entry "Target_DrainLife_7"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_5"
data "Level" "7"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(7d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone);ApplyStatus(DRAINED_OF_LIFE,100,1)"
data "HitCosts" "SpellSlotsGroup:1:1:7"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(7d8,Necrotic)"

new entry "Target_DrainLife_8"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_5"
data "Level" "8"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(8d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone);ApplyStatus(DRAINED_OF_LIFE,100,1)"
data "HitCosts" "SpellSlotsGroup:1:1:8"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(8d8,Necrotic)"

new entry "Target_DrainLife_9"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_5"
data "Level" "9"
data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(9d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone);ApplyStatus(DRAINED_OF_LIFE,100,1)"
data "HitCosts" "SpellSlotsGroup:1:1:9"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(9d8,Necrotic)"

// ==================================== Debuff

// new entry "DRAINED_OF_LIFE"
// type "StatusData"
// data "StatusType" "BOOST"
// Drained of Life
// data "DisplayName" "hd1485966g07ecg4cbbg8061gd310435970e3;1"
// This creature is drained of life. If it dies by means of &lt;LSTag Type="Spell" Tooltip="Target_DrainLife"&gt;Drain Life&lt;/LSTag&gt;, the Warlock may use the last vestiges of its mortality to restore an expended &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt;.
// data "Description" "h9ec04189g1136g4888g807bg3c45eacc1eb7;1"
// data "Icon" "PassiveFeature_Generic_Blood"
// data "StackId" "DRAINED_OF_LIFE"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;ApplyToDead"
// data "StatusGroups" "SG_RemoveOnRespec"

// ==================================== Eternal Night

new entry "EternalNightDrainLife"
type "PassiveData"
using "EternalNightDrainLife"
// Eternal Night: Drain Life
// data "DisplayName" "h1aa4c599g8f9fg460agafa0g9b45d485e7a1;1"
// Your &lt;LSTag Type="Spell" Tooltip="Target_DrainLife"&gt;Drain Life&lt;/LSTag&gt; spell deals damage and heals you as if you were expending a 1st-level spell slot.
// data "Description" "ha2b6ed94g3ab0g4db2ga242g4147b5a508f8;1"
// data "Icon" "Icon_EternalNightPassive"
// data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_DrainLife_EternalNight,AddChildren,e9127b70-22b7-42a1-b172-d02f828f260a)"
// data "StatsFunctorContext" "OnAttack;OnCast"
// data "Conditions" "not SpellId('Target_DrainLife_Base') and not SpellId('Target_DrainLife_1') and not SpellId('Target_DrainLife_2') and not SpellId('Target_DrainLife_3') and not SpellId('Target_DrainLife_4') and not SpellId('Target_DrainLife_5') and not SpellId('Target_DrainLife_EternalNight') and not SpellId('Shout_CreatureoftheNight_Wolf') and not SpellId('Shout_CreatureoftheNight_Bat') and not SpellId('Shout_CreatureoftheNightWolf_Dismiss') and not SpellId('Shout_CreatureoftheNightBat_Dismiss') and not SpellId('Shout_EldritchAppetite') and not SpellId('Shout_EternalNight')"
data "Conditions" "not SpellId('Target_DrainLife_Base') and not SpellId('Target_DrainLife_1') and not SpellId('Target_DrainLife_2') and not SpellId('Target_DrainLife_3') and not SpellId('Target_DrainLife_4') and not SpellId('Target_DrainLife_5') and not SpellId('Target_DrainLife_6') and not SpellId('Target_DrainLife_7') and not SpellId('Target_DrainLife_8') and not SpellId('Target_DrainLife_9') and not SpellId('Target_DrainLife_EternalNight') and not SpellId('Target_DrainLife_EternalNight_1') and not SpellId('Target_DrainLife_EternalNight_2') and not SpellId('Target_DrainLife_EternalNight_3') and not SpellId('Target_DrainLife_EternalNight_4') and not SpellId('Target_DrainLife_EternalNight_5') and not SpellId('Target_DrainLife_EternalNight_6') and not SpellId('Target_DrainLife_EternalNight_7') and not SpellId('Target_DrainLife_EternalNight_8') and not SpellId('Target_DrainLife_EternalNight_9') and not SpellId('Shout_CreatureoftheNight_Wolf') and not SpellId('Shout_CreatureoftheNight_Bat') and not SpellId('Shout_CreatureoftheNightWolf_Dismiss') and not SpellId('Shout_CreatureoftheNightBat_Dismiss') and not SpellId('Shout_EldritchAppetite') and not SpellId('Shout_EternalNight')"
// data "StatsFunctors" "ApplyStatus(SELF,DRAIN_LIFE_TECHNICAL_ETERNAL_NIGHT,100,1)"
data "StatsFunctors" "ApplyStatus(SELF,GOON_DRAIN_LIFE_TECHNICAL_ETERNAL_NIGHT,100,1)"

new entry "GOON_DRAIN_LIFE_TECHNICAL_ETERNAL_NIGHT"
type "StatusData"
data "StatusType" "BOOST"
using "DRAIN_LIFE_TECHNICAL_ETERNAL_NIGHT"
data "Boosts" "UnlockSpellVariant(SpellId('Target_DrainLife_EternalNight'), ModifyIconGlow())"
data "RemoveConditions" "SpellId('Target_DrainLife_Base') or SpellId('Target_DrainLife_1') or SpellId('Target_DrainLife_2') or SpellId('Target_DrainLife_3') or SpellId('Target_DrainLife_4') or SpellId('Target_DrainLife_5') or SpellId('Target_DrainLife_6') or SpellId('Target_DrainLife_7') or SpellId('Target_DrainLife_8') or SpellId('Target_DrainLife_9') or SpellId('Target_DrainLife_EternalNight') or SpellId('Target_DrainLife_EternalNight_1') or SpellId('Target_DrainLife_EternalNight_2') or SpellId('Target_DrainLife_EternalNight_3') or SpellId('Target_DrainLife_EternalNight_4') or SpellId('Target_DrainLife_EternalNight_5') or SpellId('Target_DrainLife_EternalNight_6') or SpellId('Target_DrainLife_EternalNight_7') or SpellId('Target_DrainLife_EternalNight_8') or SpellId('Target_DrainLife_EternalNight_9')"

// new entry "DRAIN_LIFE_TECHNICAL_ETERNAL_NIGHT"
// type "StatusData"
// data "StatusType" "BOOST"
// using "DRAIN_LIFE_TECHNICAL_1"
// data "StackId" "DRAIN_LIFE_TECHNICAL_ETERNAL_NIGHT"
// data "Boosts" "UnlockSpell(Target_DrainLife_EternalNight);UnlockSpell(Target_DrainLife_5)"
// data "RemoveEvents" "OnSpellCast"
// data "RemoveConditions" "SpellId('Target_DrainLife_Base') or SpellId('Target_DrainLife_1') or SpellId('Target_DrainLife_2') or SpellId('Target_DrainLife_3') or SpellId('Target_DrainLife_4') or SpellId('Target_DrainLife_5') or SpellId('Target_DrainLife_EternalNight')"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
// data "StatusGroups" "SG_RemoveOnRespec"

new entry "Target_DrainLife_EternalNight"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_EternalNight"
data "Level" "0"
// data "TargetRadius" "1.5"
// data "SpellRoll" "Attack(AttackType.MeleeSpellAttack)"
// data "SpellSuccess" "DealDamage(1d6+Cause.CharismaModifier,Necrotic,Magical);DealDamage(2d8,Necrotic,Magical);RegainHitPoints(SELF,DamageDone);ApplyStatus(DRAINED_OF_LIFE,100,1)"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
// data "TargetConditions" "not Self() and not Dead()"
data "TargetConditions" "not Self() and not Dead() and not Item() and not Tagged('CONSTRUCT') and Character()"
// data "Icon" "Icon_DrainLifeSpellSlot"
// Eternal Night: Drain Life
// data "DisplayName" "h1aa4c599g8f9fg460agafa0g9b45d485e7a1;1"
// Drain Life: Eternal Night
data "DisplayName" "h3778023agd9f2g49d2gba91g662f99c3d689;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against the target, dealing [1], plus an additional [2] as though you were expending a 1st-level &lt;LSTag Tooltip="WarlockSpellSlot"&gt;spell slot&lt;/LSTag&gt; to cast it. You regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
// data "Description" "h888e7a6dg8583g4ad3gbdcbgab0b3d118872;1"
// Make a &lt;LSTag Tooltip="MeleeSpellAttack"&gt;melee spell attack&lt;/LSTag&gt; against a living creature, dealing [1] and an additional [2] as if you were expending a 1st-level &lt;LSTag Tooltip="SpellSlot"&gt;spell slot&lt;/LSTag&gt;. Additionally, you regain &lt;LSTag Tooltip="HitPoints"&gt;hit points&lt;/LSTag&gt; equal to the total damage dealt.
data "Description" "h6e5212c5g943dg4856g99f1g070611cc18bf;1"
// data "DescriptionParams" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(2d8,Necrotic)"
data "DescriptionParams" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
// data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(2d8,Necrotic)"
data "TooltipDamageList" "DealDamage(1d6+Cause.CharismaModifier,Necrotic);DealDamage(1d8,Necrotic)"
// data "CastTextEvent" "Cast"
// data "PrepareSound" "Spell_Prepare_Damage_Necrotic_ArmsOfHadar_L1to3"
// data "PrepareLoopSound" "Spell_Loop_Damage_Necrotic_ArmsOfHadar_L1to3"
// data "CastSound" "Spell_Cast_Damage_Necrotic_VampiricTouch_L4to5"
// data "TargetSound" "Spell_Impact_Damage_Necrotic_VampiricTouch_L4to5"
// data "VocalComponentSound" "Vocal_Component_DamageNecroticVamparic"
// data "UseCosts" "BonusActionPoint:1"
// data "SpellAnimation" "f94542d9-a79c-478a-92de-573cead9260e,,;,,;601180d2-6625-4674-ad3c-2f4a5076fe5f,,;afa318ee-741d-4f5c-b9f9-3131a5ecb2c8,,;bd339475-d2b5-46e8-8d0c-9f2ad6a91328,,;,,;7a28f440-1b0b-4a18-96a8-3767959b601a,,;,,;,,"
// data "VerbalIntent" "Damage"
// data "SpellFlags" "HasSomaticComponent;Temporary"
data "SpellFlags" "HasSomaticComponent;IsMelee;IsHarmful"
// data "SpellAnimationIntentType" "Aggressive"
// data "PrepareEffect" "c4b28ad0-5d3b-4f66-9f33-0d7c82217257"
// data "CastEffect" "4cab2089-4c14-44f6-9fe0-5421ec911552"
// data "TargetEffect" "f455729a-1c6d-4a9b-8a60-6a05ea057bb4"
// data "BeamEffect" "c6d17c32-998f-4323-93a7-040e4a042ef3"
// data "DamageType" "Necrotic"

new entry "Target_DrainLife_EternalNight_1"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_1"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"

new entry "Target_DrainLife_EternalNight_2"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_2"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"

new entry "Target_DrainLife_EternalNight_3"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_3"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"

new entry "Target_DrainLife_EternalNight_4"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_4"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"

new entry "Target_DrainLife_EternalNight_5"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_5"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"

new entry "Target_DrainLife_EternalNight_6"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_6"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"

new entry "Target_DrainLife_EternalNight_7"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_7"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"

new entry "Target_DrainLife_EternalNight_8"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_8"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"

new entry "Target_DrainLife_EternalNight_9"
type "SpellData"
data "SpellType" "Target"
using "Target_DrainLife_9"
data "RequirementConditions" "Goon_HasAttackedOrCast_FirstVampireWarlock()"
data "RootSpellID" "Target_DrainLife_EternalNight"