// ==================================== Make Astarion munching friendlies not debuff ====================================

new entry "ASTARION_WEAK"
type "StatusData"
data "StatusType" "BOOST"
using "ASTARION_WEAK"
// Bloodless
// data "DisplayName" "h75bb76f6g44a5g4897g85ddg5c78bae1190b;1"
// Feels a bit woozy. -1 to &lt;LSTag Tooltip="AttackRoll"&gt;Attack Rolls&lt;/LSTag&gt;, &lt;LSTag Tooltip="SavingThrow"&gt;Saving Throws&lt;/LSTag&gt;, and most &lt;LSTag Tooltip="AbilityCheck"&gt;Ability Checks&lt;/LSTag&gt;.
// data "Description" "hc728060eg9aa6g46a7g987bg03664e5ec80a;1"
// data "Icon" "Status_Astarion_Weak"
// data "SoundLoop" "Misc_Status_Bloodeless_MO"
// data "SoundStop" "Misc_Status_Bloodeless_MO_Stop"
// data "StackId" "ASTARION_WEAK"
data "StackPriority" "1"
// data "Boosts" "RollBonus(SavingThrow,0-1);RollBonus(Attack,0-1);RollBonus(SkillCheck,0-1)"
data "OnApplyFunctors" "IF(Ally()):ApplyStatus(GOON_ASTARION_WEAK_FRIENDLY,100,-1)"
// data "StatusPropertyFlags" "InitiateCombat"
// data "StatusEffect" "a0f74dff-7074-45aa-a4d2-a131d7f328f5"
data "StatusEffect" ""

new entry "GOON_ASTARION_WEAK_FRIENDLY"
type "StatusData"
data "StatusType" "BOOST"
// Blood Donor
data "DisplayName" "h03ca14d9g0ca8g41d7g8bcfg6ea42fd5705f;1"
// You feel a bit woozy, though you'd feel a lot worse were the feeding involuntary.
data "Description" "h9b7c1291g114dg4269gba95g59b4193d84b4;1"
// data "OnApplyFunctors" "ApplyStatus(GOON_ASTARION_WEAK_FRIENDLY,100,-1)"
data "OnApplyFunctors" "ApplyStatus(GOON_ASTARION_WEAK_FRIENDLY_FX,100,1)"
data "StackId" "ASTARION_WEAK"
data "StackPriority" "2"

new entry "GOON_ASTARION_WEAK_FRIENDLY_FX"
type "StatusData"
data "StatusType" "BOOST"
data "StatusPropertyFlags" "DisableOverhead;DisablePortraitIndicator;DisableCombatlog"
data "StatusEffect" "a0f74dff-7074-45aa-a4d2-a131d7f328f5"
data "SoundLoop" "Misc_Status_Bloodeless_MO"
data "SoundStop" "Misc_Status_Bloodeless_MO_Stop"

// ==================================== Wifi Potions - Add "data "DefaultBoosts" "Tag(NOSORT)"" for exclusion from Simple Sorting Containers ====================================

new entry "FallenStar_Wifi_Healing_Potion_Small"
type "Object"
using "FallenStar_Wifi_Healing_Potion_Small"
// data "DefaultBoosts" "CriticalHit(AttackTarget,Failure,Never);CriticalHit(AttackTarget,Success,Never)"
data "DefaultBoosts" "CriticalHit(AttackTarget,Failure,Never);CriticalHit(AttackTarget,Success,Never);Tag(NOSORT)"

new entry "FallenStar_Wifi_Healing_Potion_Greater"
type "Object"
using "FallenStar_Wifi_Healing_Potion_Greater"
// data "DefaultBoosts" "CriticalHit(AttackTarget,Failure,Never);CriticalHit(AttackTarget,Success,Never)"
data "DefaultBoosts" "CriticalHit(AttackTarget,Failure,Never);CriticalHit(AttackTarget,Success,Never);Tag(NOSORT)"

new entry "FallenStar_Wifi_Healing_Potion_Superior"
type "Object"
using "FallenStar_Wifi_Healing_Potion_Superior"
// data "DefaultBoosts" "CriticalHit(AttackTarget,Failure,Never);CriticalHit(AttackTarget,Success,Never)"
data "DefaultBoosts" "CriticalHit(AttackTarget,Failure,Never);CriticalHit(AttackTarget,Success,Never);Tag(NOSORT)"

new entry "FallenStar_Wifi_Healing_Potion_Supreme"
type "Object"
using "FallenStar_Wifi_Healing_Potion_Supreme"
// data "DefaultBoosts" "CriticalHit(AttackTarget,Failure,Never);CriticalHit(AttackTarget,Success,Never)"
data "DefaultBoosts" "CriticalHit(AttackTarget,Failure,Never);CriticalHit(AttackTarget,Success,Never);Tag(NOSORT)"

// ==================================== Necromancy of Thay - Remove "Attribute(InventoryBound)" - Also removed "data "DefaultBoosts" "Tag(NOSORT)"" for inclusion with Simple Sorting Containers ====================================
// TODO: Change description?

new entry "FOR_DANGEROUSBOOK_BOUNDTO"
type "StatusData"
data "StatusType" "BOOST"
using "FOR_DANGEROUSBOOK_BOUNDTO"
// Twisted Binding
// data "DisplayName" "h2bfcef73gfdaeg402aga54ag69075be95abb;1"
// A powerful eldritch bond connects this relic and its owner.
// data "Description" "h4edd2d1agdab4g41aaga114g2c9035001938;1"
// data "Icon" "statIcons_Bound"
// data "StackId" "FOR_DANGEROUSBOOK_BOUNDTO"
// data "Boosts" "Attribute(InventoryBound)"
data "Boosts" ""
// "DefaultBoosts" "Tag(NOSORT)" (Simple Sorting Bags)
data "DefaultBoosts" ""

// ==================================== Heavy Armour Impedes Movement RAW (HeavyArmorMoveSpeed_SE) - Add tooltip visibility for player clarity ====================================

new entry "IsWearingHeavyArmor_13"
type "PassiveData"
using "IsWearingHeavyArmor_13"
// Heavy Armor
// data "DisplayName" "he9e959cd7dc04281b9d00d5e545e2875dbcb"
// Heavy Mail Armour
data "DisplayName" "hdb671db5gc473g4c5cgbc20gb33849e43a36;1"
// Reduces movement speed by 3m if your Strength is 13 or lower.
// data "Description" "hfc7f04aa215c4dcc9112276aba248c88ge89"
// The entity's &lt;LSTag Tooltip="MovementSpeed"&gt;movement speed&lt;/LSTag&gt; is reduced by [1] if its &lt;LSTag Tooltip="Strength"&gt;Strength&lt;/LSTag&gt; is lower than 13 while wearing heavy splint, ring mail or chain mail armour.
data "Description" "hfe823e2cgda3eg474eg81b9gbcb416d33d1e;1"
data "DescriptionParams" "Distance(3);4"
// data "Icon" "statIcons_Encumbered"
// data "BoostContext" "OnEquip;OnTurn;OnCreate"
// data "BoostConditions" "ConditionResult(context.Source.Strength < 13) and not Tagged('DWARF', context.Source)"
// data "Boosts" "ActionResource(Movement,-3,0)"
// data "Properties" "IsHidden"
data "Properties" "Highlighted"

new entry "IsWearingHeavyArmor_15"
type "PassiveData"
// using "IsWearingHeavyArmor_13"
using "IsWearingHeavyArmor_15"
// Heavy Plate Armour
data "DisplayName" "hfefc557cg6c20g4684gb61fg915f64656ce4;1"
// The entity's &lt;LSTag Tooltip="MovementSpeed"&gt;movement speed&lt;/LSTag&gt; is reduced by [1] if its &lt;LSTag Tooltip="Strength"&gt;Strength&lt;/LSTag&gt; is lower than 13 while wearing heavy plate armour.
data "Description" "hbc32d0feg08fag45d4gbddage0e5dc53e56d;1"
// data "BoostConditions" "ConditionResult(context.Source.Strength < 15) and not Tagged('DWARF', context.Source)"

// ==================================== Mobility Overhaul - Reduce duration of the Off Balanced condition from jumping ====================================
// TODO: Remove when I do my own mobility overhaul.

new entry "MO_Jump_Off_Balanced_Self"
type "SpellData"
data "SpellType" "Projectile"
using "MO_Jump_Off_Balanced_Self"
// data "TargetCeiling" "0.8"
// data "TargetFloor" "-1"
// data "TargetRadius" "0"
// data "AreaRadius" "0"
// data "ExplodeRadius" "1"
// data "AddRangeFromAbility" "Strength,1"
// data "ProjectileCount" "1"
// data "Trajectories" "9d893642-654d-41a4-aaad-81f9dc588941,10e3e9e2-82b1-16be-80c3-bba883d01b48,e528a4bd-bc17-d0d1-188c-dbe1d4eda1f0"
// data "Icon" "Action_Jump"
// data "PrepareSound" "Generic_Prepare_Jump"
// data "PrepareLoopSound" "Generic_GeneralAction_Loop"
// data "CastSound" "Action_Cast_Jump"
// data "CastTextEvent" "Cast"
// data "ProjectileTerrainOffset" "Yes"
// data "UseCosts" "BonusActionPoint:1;Movement:3"
// data "SpellRoll" "not SkillCheck(Skill.Acrobatics, 10)"
// data "SpellSuccess" "ApplyStatus(SELF, OFF_BALANCED,100,2)"
data "SpellSuccess" "ApplyStatus(SELF, OFF_BALANCED,100,1)"
// data "TargetConditions" "Character() and Self() and not Dead() and not HasStatus('FEATHER_FALL')"
// data "SpellAnimation" "b6bebde2-ecff-4df6-9d24-cd9fabb9fe79,,;,,;f49c1788-7819-481f-9b83-2344d708e682,,;8ee67630-f1c7-441d-aaf6-fa4633c890da,,;f8fe2e89-2313-48f7-963c-0907b6306fd1,,;,,;5abe3725-c152-42de-98c8-0dbf872e1ff2,,;,,;,,"
// data "VerbalIntent" "Utility"
// data "SpellActionType" "Jump"
// data "SpellCategory" "SC_Jump"
// data "SpellAnimationIntentType" "Action"
// data "SpellJumpType" "Jump"
// data "MinJumpDistance" "2"
// data "Requirements" "!Immobile"
// data "PrepareEffect" "095b53a6-b1f1-4f4f-84ab-88c2f90d85b0"
// data "CastEffect" "e20c5e32-203b-4dae-9049-f0289a60c31d"
// data "SpellSoundMagnitude" "Small"
// data "Sheathing" "DontChange"
// data "SpellFlags" "None"

// ==================================== Animate Dead Plus Plus & Automated Summons - Make all the toggles pop up together for consistency and less people asking how to get their Automate Summons back "I only have Undead Automation" etc. ====================================

new entry "SHORT_REST"
type "StatusData"
data "StatusType" "BOOST"
using "SHORT_REST"
data "OnApplyFunctors" "IF(Player() and Tagged('PLAYABLE') and Tagged('AVATAR') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_ADPP_PASSIVES')):ApplyStatus(SAILORCAT_ADPP_PASSIVES,100,-1);IF(Player() and Tagged('PLAYABLE') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_ADPP_PASSIVES_AUX')):ApplyStatus(SAILORCAT_ADPP_PASSIVES_AUX,100,-1);IF(Player() and Tagged('PLAYABLE') and Tagged('AVATAR') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_AUTOMATED_SUMMONS_PASSIVES')):ApplyStatus(SAILORCAT_AUTOMATED_SUMMONS_PASSIVES,100,-1)"
data "OnRemoveFunctors" "IF(Player() and Tagged('PLAYABLE') and Tagged('AVATAR') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_ADPP_PASSIVES')):ApplyStatus(SAILORCAT_ADPP_PASSIVES,100,-1);IF(Player() and Tagged('PLAYABLE') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_ADPP_PASSIVES_AUX')):ApplyStatus(SAILORCAT_ADPP_PASSIVES_AUX,100,-1);IF(Player() and Tagged('PLAYABLE') and Tagged('AVATAR') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_AUTOMATED_SUMMONS_PASSIVES')):ApplyStatus(SAILORCAT_AUTOMATED_SUMMONS_PASSIVES,100,-1)"

new entry "NON_LETHAL"
type "StatusData"
data "StatusType" "BOOST"
using "NON_LETHAL"
data "OnApplyFunctors" "IF(Player() and Tagged('PLAYABLE') and Tagged('AVATAR') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_ADPP_PASSIVES')):ApplyStatus(SAILORCAT_ADPP_PASSIVES,100,-1);IF(Player() and Tagged('PLAYABLE') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_ADPP_PASSIVES_AUX')):ApplyStatus(SAILORCAT_ADPP_PASSIVES_AUX,100,-1);IF(Player() and Tagged('PLAYABLE') and Tagged('AVATAR') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_AUTOMATED_SUMMONS_PASSIVES')):ApplyStatus(SAILORCAT_AUTOMATED_SUMMONS_PASSIVES,100,-1)"
data "OnRemoveFunctors" "IF(Player() and Tagged('PLAYABLE') and Tagged('AVATAR') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_ADPP_PASSIVES')):ApplyStatus(SAILORCAT_ADPP_PASSIVES,100,-1);IF(Player() and Tagged('PLAYABLE') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_ADPP_PASSIVES_AUX')):ApplyStatus(SAILORCAT_ADPP_PASSIVES_AUX,100,-1);IF(Player() and Tagged('PLAYABLE') and Tagged('AVATAR') and not Tagged('SUMMON') and not Summon() and not HasStatus('SAILORCAT_AUTOMATED_SUMMONS_PASSIVES')):ApplyStatus(SAILORCAT_AUTOMATED_SUMMONS_PASSIVES,100,-1)"

// ==================================== Carry capacity and gold weight changes ====================================
// Commented out, gonna leave it vanilla and see if other systems can actually make it interesting. But getting rid of gold weight is a pretty decent little qol in a world where carry cap matters

// key "EncumberedMultiplier","35"

// key "HeavilyEncumberedMultiplier","45"

// key "CarryLimitMultiplier","50"

new entry "_Gold"
type "Object"
// using "_BaseItem"
using "_Gold"
// data "Weight" "0.001"
data "Weight" "0"
// data "InventoryTab" "Misc"

// ==================================== Block pickpocketing for Volo and Withers ====================================

new entry "GLO_Volo"
type "Character"
// using "Human_Commoner"
using "GLO_Volo"
// data "Strength" "9"
// data "Dexterity" "12"
// data "Intelligence" "15"
// data "Wisdom" "11"
// data "Charisma" "16"
// data "Vitality" "18"
// data "Proficiency Group" "SimpleWeapons;MusicalInstrument"
// data "DefaultBoosts" "BlockRegainHP(Undead;Construct)"
data "DefaultBoosts" "BlockRegainHP(Undead;Construct);Tag(BLOCK_PICKPOCKET)"

new entry "GLO_Jergal"
type "Character"
// using "_Undead"
using "GLO_Jergal"
// data "Wisdom" "18"
// data "Vitality" "1"
// data "DefaultBoosts" "ProficiencyBonus(SavingThrow, Wisdom); BlockRegainHP(Living;Construct)"
data "DefaultBoosts" "ProficiencyBonus(SavingThrow, Wisdom);BlockRegainHP(Living;Construct);Tag(BLOCK_PICKPOCKET)"
// data "PersonalStatusImmunities" "KNOCKED_OUT;SG_Charmed;SG_Frightened;SG_Poisoned;PARALYZED;STUNNED"
// data "Passives" "AttackOfOpportunity;DarknessRules;ImmuneToControlUndead"
