// ==================================== Witch - A BG3 Homebrew ====================================
// Bug Fix: Item spells in base spell container

new entry "Target_Witch_Item_Sleep"
type "SpellData"
data "SpellType" "Target"
// using "Target_Sleep_6"
using "Target_Witch_Item_Sleep"
// data "Cooldown" "OncePerShortRest"
// data "TargetConditions" "not HasHPMoreThan(64) and not HasStatus('SG_Unconscious') and not Dead() and Character() and not Ally() and not (not Player(context.Source) and IsCrowdControlled(context.Target)) and not IsImmuneToStatus('SLEEP')"
// data "PreviewCursor" "Cast"
// data "UseCosts" "ActionPoint:1"
data "RootSpellID" ""

new entry "Target_Witch_Item_Shatter"
type "SpellData"
data "SpellType" "Target"
// using "Target_Shatter_3"
using "Target_Witch_Item_Shatter"
// data "Cooldown" "OncePerCombat"
// data "PreviewCursor" "Cast"
// data "UseCosts" "ActionPoint:1"
data "RootSpellID" ""

new entry "Target_Witch_Item_Banishment"
type "SpellData"
data "SpellType" "Target"
// using "Target_Banishment_5"
using "Target_Witch_Item_Banishment"
// data "Cooldown" "OncePerRestPerItem"
// data "PreviewCursor" "Cast"
// data "UseCosts" "ActionPoint:1"
data "RootSpellID" ""

// ==================================== OneDnD Monk Martial Arts ====================================
// Bug Fix: Tooltip link fix for "CL_Target_OneDnD_MartialArts_UnarmedStrike_BonusAction"

new entry "CL_Passive_OneDnD_MartialArts"
type "PassiveData"
using "CL_Passive_OneDnD_MartialArts"
// Attacks with &lt;LSTag Tooltip="MonkWeapon"&gt;Monk Weapons&lt;/LSTag&gt; and unarmed attacks deal [1], unless their normal damage is higher and scale with your &lt;LSTag Tooltip="Dexterity"&gt;Dexterity&lt;/LSTag&gt; instead of your &lt;LSTag Tooltip="Strength"&gt;Strength&lt;/LSTag&gt; if your Dexterity is higher. In addition, you can make &lt;LSTag Type="Spell" Tooltip="CL_Target_OneDnD_MartialArts_UnarmedStrikeBonus"&gt;Unarmed Strikes&lt;/LSTag&gt; as a &lt;LSTag Type="ActionResource" Tooltip="BonusActionPoint"&gt;bonus action&lt;/LSTag&gt;.
// data "Description" "h3fedefce3b194d5e8fe1cf6d0a02d1d17566;1"
// Attacks with &lt;LSTag Tooltip="MonkWeapon"&gt;Monk Weapons&lt;/LSTag&gt; and unarmed attacks deal [1], unless their normal damage is higher and scale with your &lt;LSTag Tooltip="Dexterity"&gt;Dexterity&lt;/LSTag&gt; instead of your &lt;LSTag Tooltip="Strength"&gt;Strength&lt;/LSTag&gt; if your Dexterity is higher. In addition, you can make &lt;LSTag Type="Spell" Tooltip="CL_Target_OneDnD_MartialArts_UnarmedStrike_BonusAction"&gt;Unarmed Strikes&lt;/LSTag&gt; as a &lt;LSTag Type="ActionResource" Tooltip="BonusActionPoint"&gt;bonus action&lt;/LSTag&gt;.
data "Description" "h24a45b2cgd16fg4189g85c1gde831fc0aa62;1"

// ==================================== Speak with Dead Reworks and Tweaks - Remove "IgnoreResting" ====================================
// Amulet of Lost Voices etc. will give the buff permanently, we don't want that really. Self-casting the buff after a rest is enough QoL and in line with other buff spells.

new entry "SPEAK_WITH_DEAD_RECAST"
type "StatusData"
using "SPEAK_WITH_DEAD_RECAST"
// data "StatusPropertyFlags" "DisableCombatlog;DisablePortraitIndicator;DisableOverhead;IgnoreResting;ApplyToDead"
data "StatusPropertyFlags" "DisableCombatlog;DisablePortraitIndicator;DisableOverhead;ApplyToDead"

// ==================================== JWL Discordant Instruments ====================================
// Bug Fix: Trinket spells will no longer show in the base spell containers when upcasting.
// Bug Fix: Damage riders as DRS fixed, cohesive with Honour ruleset.
// Bug Fix: Combat log and overhead message spam removed from aura application/removal.
// Bug Fix: Statuses will no longer be removed from long resting or dying, forcing characters to re-equip items.
// Changes: Auras buff summons.
// Changes: Symbol of Kelemvor works for melee unarmed attacks in addition to melee weapon attacks.

new entry "JWL_Target_GuardianOfFaith_Trinket"
type "SpellData"
data "SpellType" "Target"
// using "Target_GuardianOfFaith"
using "JWL_Target_GuardianOfFaith_Trinket"
// data "Cooldown" "OncePerShortRestPerItem"
// data "UseCosts" "ActionPoint:1"
// data "RootSpellID" "Target_GuardianOfFaith"
data "RootSpellID" ""

new entry "JWL_Target_HoldMonster_Trinket"
type "SpellData"
data "SpellType" "Target"
// using "Target_HoldMonster"
using "JWL_Target_HoldMonster_Trinket"
// data "Level" "6"
// data "Cooldown" "OncePerRestPerItem"
// data "AmountOfTargets" "2"
// data "SpellRoll" "not SavingThrow(Ability.Wisdom, SourceSpellDC())"
// data "TooltipAttackSave" "Intelligence"
// data "UseCosts" "ActionPoint:1"
// data "RootSpellID" "Target_HoldMonster"
// data "CombatAIOverrideSpell" "Target_HoldMonster_6_AI"
data "RootSpellID" ""

new entry "JWL_Shout_MAG_SpellSlotRestoration_2"
type "SpellData"
data "SpellType" "Shout"
// using "Shout_MAG_SpellSlotRestoration"
using "JWL_Shout_MAG_SpellSlotRestoration_2"
// data "SpellContainerID" "JWL_Shout_MAG_SpellSlotRestoration_Trinket"
// data "ContainerSpells" ""
// data "SpellProperties" "RestoreResource(SpellSlot,1,2);RestoreResource(WarlockSpellSlot,1,2)"
// data "Icon" "Action_Mag_SpellSlotRestoration_2"
// data "Description" "h9d8b1258g399cg412cgaa1bg8c4a89bc0ecc;4"
// data "DescriptionParams" "2"
// data "SpellFlags" ""
// data "RootSpellID" "Shout_MAG_SpellSlotRestoration_1"
// data "PowerLevel" "2"
data "RootSpellID" ""

new entry "JWL_Shout_MAG_SpellSlotRestoration_3"
type "SpellData"
data "SpellType" "Shout"
// using "Shout_MAG_SpellSlotRestoration"
using "JWL_Shout_MAG_SpellSlotRestoration_3"
// data "SpellContainerID" "JWL_Shout_MAG_SpellSlotRestoration_Trinket"
// data "ContainerSpells" ""
// data "SpellProperties" "RestoreResource(SpellSlot,1,3);RestoreResource(WarlockSpellSlot,1,3)"
// data "Icon" "Action_Mag_SpellSlotRestoration_3"
// data "Description" "hcff83e80gb0a6g4aadg85d7gbc8f4121993d;4"
// data "DescriptionParams" "3"
// data "SpellFlags" ""
// data "RootSpellID" "Shout_MAG_SpellSlotRestoration_1"
// data "PowerLevel" "3"
data "RootSpellID" ""

new entry "JWL_Passive_SymbolKelemvor"
type "PassiveData"
using "JWL_Passive_SymbolKelemvor"
// data "DisplayName" "h056322b9g3133g4a74g94fcg870752f5a500;1"
// data "Description" "h41345d5eg81deg4336g8edcgbd7b9c2bc9b7;1"
// data "DescriptionParams" "DealDamage(1,Radiant);DealDamage(1,Necrotic)"
// data "StatsFunctorContext" "OnDamage"
data "StatsFunctorContext" ""
// data "Conditions" "IsMeleeWeaponAttack()"
data "Conditions" ""
// data "StatsFunctors" "DealDamage(1,Radiant);DealDamage(1,Necrotic)"
data "StatsFunctors" ""
data "Boosts" "IF(IsMeleeWeaponAttack() or IsMeleeUnarmedAttack()):DamageBonus(1,Radiant);IF(IsMeleeWeaponAttack() or IsMeleeUnarmedAttack()):DamageBonus(1,Necrotic)"

new entry "JWL_Status_BannerMourningsteelAura"
type "StatusData"
data "StatusType" "BOOST"
using "JWL_Status_BannerMourningsteelAura"
// data "DisplayName" "h2f47412bgb3d8g4e9cg843egabd782d5bbab;1"
// data "Description" "hb6ca31a7g534eg40a3gb4aag7c8a0eef5055;1"
// data "DescriptionParams" "Distance(4.5);1"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"
// data "Icon" "PassiveFeature_Banite_TacticalDiscipline"
// data "StackId" "JWL_Status_BannerMourningsteelAura"
// data "AuraRadius" "4.5"
// data "AuraStatuses" "IF(Character() and Ally() and not Tagged('SUMMON')):ApplyStatus(JWL_Status_BannerMourningsteelBuff)"
data "AuraStatuses" "IF(not Dead(context.Source) and (Character() and Ally() and not Dead())):ApplyStatus(JWL_Status_BannerMourningsteelBuff)"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "JWL_Status_BannerMourningsteelBuff"
type "StatusData"
data "StatusType" "BOOST"
using "JWL_Status_BannerMourningsteelBuff"
// data "DisplayName" "h2f47412bgb3d8g4e9cg843egabd782d5bbab;1"
// data "Description" "hbe6d1f0dg8806g4448gbff5g9bcc906624a0;1"
// data "DescriptionParams" "1"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;ApplyToDead;IgnoreResting"
// data "Icon" "PassiveFeature_Banite_TacticalDiscipline"
// data "StackId" "JWL_Status_BannerMourningsteelBuff"
// data "Boosts" "AC(1);RollBonus(SavingThrow, 1)"

new entry "JWL_Status_BannerGoblinAura"
type "StatusData"
data "StatusType" "BOOST"
using "JWL_Status_BannerGoblinAura"
// data "DisplayName" "h8c942f84g5a21g4cefga90eg9b6387fa7fda;1"
// data "Description" "h87c08893gb9d9g422bg8fb2gbff604eb96f6;1"
// data "DescriptionParams" "Distance(4.5);DealDamage(1d4,Poison)"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"
// data "Icon" "GenericIcon_DamageType_Poison"
// data "StackId" "JWL_Status_BannerGoblinAura"
// data "AuraRadius" "4.5"
// data "AuraStatuses" "IF(Character() and Ally() and not Tagged('SUMMON')):ApplyStatus(JWL_Status_BannerGoblinBuff)"
data "AuraStatuses" "IF(not Dead(context.Source) and (Character() and Ally() and not Dead())):ApplyStatus(JWL_Status_BannerGoblinBuff)"

new entry "JWL_Status_BannerGoblinBuff"
type "StatusData"
data "StatusType" "BOOST"
using "JWL_Status_BannerGoblinBuff"
// data "DisplayName" "h8c942f84g5a21g4cefga90eg9b6387fa7fda;1"
// data "Description" "h6d3375acgb5c5g447ag98c4g0c67e3f905f1;1"
// data "DescriptionParams" "DealDamage(1d4,Poison)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;ApplyToDead;IgnoreResting"
// data "Icon" "GenericIcon_DamageType_Poison"
// data "StackId" "JWL_Status_BannerGoblinBuff"
// data "Boosts" "DamageBonus(1d4,Poison)"
data "Boosts" "IF(IsAttack()):DamageBonus(1d4,Poison)"

new entry "JWL_Status_BannerConsecratedAura"
type "StatusData"
data "StatusType" "BOOST"
using "JWL_Status_BannerConsecratedAura"
// data "DisplayName" "hb8ce9867ga25ag4c9bg8be0g694d1bb36acc;1"
// data "Description" "h5c06d5f0gb4feg46e6g9076g97538156c965;1"
// data "DescriptionParams" "Distance(4.5);DealDamage(1d4,Radiant)"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"
// data "Icon" "GenericIcon_DamageType_Radiant"
// data "StackId" "JWL_Status_BannerConsecratedAura"
// data "AuraRadius" "4.5"
// data "AuraStatuses" "IF(Character() and Ally() and not Tagged('SUMMON')):ApplyStatus(JWL_Status_BannerConsecratedBuff)"
data "AuraStatuses" "IF(not Dead(context.Source) and (Character() and Ally() and not Dead())):ApplyStatus(JWL_Status_BannerConsecratedBuff)"

new entry "JWL_Status_BannerConsecratedBuff"
type "StatusData"
data "StatusType" "BOOST"
using "JWL_Status_BannerConsecratedBuff"
// data "DisplayName" "hb8ce9867ga25ag4c9bg8be0g694d1bb36acc;1"
// data "Description" "h1fcc3d53g1d88g4d06gbd18gb02b50feaf35;1"
// data "DescriptionParams" "DealDamage(1d4,Radiant)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;ApplyToDead;IgnoreResting"
// data "Icon" "GenericIcon_DamageType_Radiant"
// data "StackId" "JWL_Status_BannerConsecratedBuff"
// data "Passives" "JWL_Passive_BannerConsecrated_TECHNICAL"
// data "Boosts" "DamageBonus(1d4,Radiant)"
data "Boosts" "IF(IsAttack()):DamageBonus(1d4,Radiant)"

new entry "JWL_Status_BannerInfernalPowerAura"
type "StatusData"
data "StatusType" "BOOST"
using "JWL_Status_BannerInfernalPowerAura"
// data "DisplayName" "hf6bdc4fbg9425g4934ga102g2e49f33cf1f9;1"
// data "Description" "h189a3126g1df0g4bb8gb4ecgdd23d771b39e;1"
// data "DescriptionParams" "Distance(4.5);2;DealDamage(1d6,Fire)"
// data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"
// data "Icon" "Action_Warlock_PactOfTheChain_Quasit"
// data "StackId" "JWL_Status_BannerInfernalPowerAura"
// data "AuraRadius" "4.5"
// data "AuraStatuses" "IF(Character() and Ally() and not Tagged('SUMMON')):ApplyStatus(JWL_Status_BannerInfernalPowerBuff)"
data "AuraStatuses" "IF(not Dead(context.Source) and (Character() and Ally() and not Dead())):ApplyStatus(JWL_Status_BannerInfernalPowerBuff)"

new entry "JWL_Status_BannerInfernalPowerBuff"
type "StatusData"
data "StatusType" "BOOST"
using "JWL_Status_BannerInfernalPowerBuff"
// data "DisplayName" "hf6bdc4fbg9425g4934ga102g2e49f33cf1f9;1"
// data "Description" "h9334bf00g0459g4b50gaeb2g0f817b27dadc;1"
// data "DescriptionParams" "2;DealDamage(1d6,Fire)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;ApplyToDead;IgnoreResting"
// data "Icon" "Action_Warlock_PactOfTheChain_Quasit"
// data "StackId" "JWL_Status_BannerInfernalPowerBuff"
// data "Passives" "JWL_Passive_BannerInfernalPower_TECHNICAL"
// data "Boosts" "RollBonus(MeleeWeaponAttack,2);RollBonus(RangedWeaponAttack,2);RollBonus(RangedOffHandWeaponAttack, 2)"
data "Boosts" "RollBonus(MeleeWeaponAttack,2);RollBonus(MeleeOffHandWeaponAttack,2);RollBonus(RangedWeaponAttack,2);RollBonus(RangedOffHandWeaponAttack, 2)"

// ==================================== Mobility Overhaul - Fix bugged tooltip ====================================

new entry "UnarmoredMovement_1"
using "UnarmoredMovement_1"
type "PassiveData"
// data "Description" "3048fe614f8834940b9a70e9d70b4a171;4"
data "Description" "3048fe61f8834940b9a70e9d70b4a171;4"

// ==================================== Target_PsionicPull, Target_SteelWatcher_Biped_RetrievingShot, Target_MAG_RetrievingShot, and Target_MAG_RetrievingShot_ShortRest (from VEO) all inherit from Target_Hex (in a chain) and Valdacil's Spell Adjustments just breaks them all ====================================

new entry "Target_PsionicPull"
type "SpellData"
data "SpellType" "Target"
// using "Target_Hex"
data "Level" ""
data "SpellSchool" ""
data "SpellContainerID" ""
data "ContainerSpells" ""
data "Cooldown" "OncePerShortRest"
// data "SpellProperties" "Force(-9, OriginToEntity, Neutral, false, true)"
data "SpellProperties" "Force(-9, OriginToTarget, Neutral, false, true)"
data "TargetRadius" "18"
data "RequirementConditions" "not Tagged('TADPOLE_POWERS_BLOCKED')"
data "SpellRoll" ""
data "SpellSuccess" ""
data "SpellFail" ""
data "TargetConditions" "not Self() and not Grounded() and IsMovable()"
data "Icon" "TadpoleSuperPower_PsionicPull"
// Psionic Pull
data "DisplayName" "h036c0e95g4d9fg4492g83dbga7cb95dd188f;1"
// Pull one creature or object towards you.
data "Description" "h6c09e973gb4ffg49e6g8832g9af0c3b06160;1"
data "ExtraDescription" ""
data "TooltipDamageList" ""
data "CastSound" "Spell_Cast_Tadpole_PsionicPull_L1to3"
data "TargetSound" "Spell_Impact_Tadpole_PsionicPull_L1to3"
// Added:
data "VocalComponentSound" "Vocal_Component_Curse"
data "CastTextEvent" "Cast"
data "CycleConditions" "Enemy() and not Dead()"
data "UseCosts" "BonusActionPoint:1"
data "SpellAnimation" "f94542d9-a79c-478a-92de-573cead9260e,,;,,;5ca5b155-fbc3-465e-ab24-55421c91bea7,,;7da4ad07-cfc9-4de0-a02c-7f1b07fac394,,;bd339475-d2b5-46e8-8d0c-9f2ad6a91328,,;,,;,,;,,;,,"
data "VerbalIntent" ""
// Added:
data "SpellStyleGroup" "Class"
data "SpellFlags" "HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful;AddFallDamageOnLand"
data "MemoryCost" ""
data "RootSpellID" ""
data "PrepareEffect" "54d12e90-23ce-4f2b-af51-c50be6e9c6a9"
data "CastEffect" "456933cc-f8c3-42d9-ae4c-622d83391cc6"
data "TargetEffect" "aafee3d2-0f5b-42b7-a91c-1397fb58dd25"
data "BeamEffect" "f23f8654-27d8-461e-a8cd-c3e6a19eba92"

// ========================= Lathander's Armory fixes ================================== 

// Fixes the Lathander's Crest trinket, having it heal properly

// Add technical status to armour to track the wearer
new entry "CSS_LATHANDER_CREST_TRINKET"
type "Armor"
// using "_Amulet_Magic"
using "CSS_LATHANDER_CREST_TRINKET"
data "StatusOnEquip" "LATHANDER_SURGEOFLIGHT_TECHNICAL"

// Passive only gives 3 hit points to entity that has the technical status. SELF parameter removed from RegainHitPoints()
new entry "CSS_Lathander_Pass_SurgeOfLight"
type "PassiveData"
using "CSS_Lathander_Pass_SurgeOfLight"
// data "Conditions" "HasStatus('LATHANDER_SURGEOFLIGHT_TECHNICAL', context.Target)"
data "Conditions" "(Character() and not Self()) or AreaRadiusGreaterThan(1)"
// data "StatsFunctors" "IF(not HasStatus('MAG_HEAL_SELF_ONCE_TECHNICAL', context.Source)):RegainHitPoints(SELF,3);ApplyStatus(SELF, MAG_HEAL_SELF_ONCE_TECHNICAL, 100, 0)"
data "StatsFunctors" "IF(not HasStatus('MAG_HEAL_SELF_ONCE_TECHNICAL', context.Source)):RegainHitPoints(3);ApplyStatus(SELF, MAG_HEAL_SELF_ONCE_TECHNICAL, 100, 0)"

// New technical status
new entry "LATHANDER_SURGEOFLIGHT_TECHNICAL"
type "StatusData"
data "StatusType" "BOOST"
data "StackId" "LATHANDER_SURGEOFLIGHT_TECHNICAL"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"

// tooltip clarification for Aegis of the Aster's Spell Save DC
// Replaces +1 spell save DC in Boosts with the existing High Spellcasting passive in PassivesOnEquip
new entry "CSS_WPN_LATHANDER_GRDOFATH_A"
type "Armor"
using "CSS_WPN_LATHANDER_GRDOFATH_A"
data "Boosts" "Advantage(SavingThrow, Dexterity)"
data "PassivesOnEquip" "MAG_ShieldRiposte_Passive;CSS_Lathander_Pass_BalduHeal;MAG_SpellSaveDC_Enchantment_Lesser_Passive"

// ILLUMINATED SHIT SHOULD WORK NOW
new entry "CSS_Lathander_Pass_IlluminateAC" 
type "PassiveData"
// using "ARM_Shield_1"
using "CSS_Lathander_Pass_IlluminateAC" 
data "BoostContext" "OnObscurityChanged;OnEquip;OnCreate;OnAttacked;OnMovedDistance;OnStatusApplied;OnStatusRemoved"
data "BoostConditions" "HasObscuredState(ObscuredState.Clear,context.Source)"
// data "Boosts" "Advantage(SavingThrow, Dexterity);SpellSaveDC(1)"
data "Boosts" "AC(1)"

new entry "CSS_Lathander_Pass_IlluminateConc" 
type "PassiveData"
using "CSS_Lathander_Pass_IlluminateConc" 
// data "StatsFunctorContext" "OnObscurityChanged;OnCreate"
data "StatsFunctorContext" ""
data "BoostContext" "OnObscurityChanged;OnEquip;OnCreate;OnAttacked;OnMovedDistance;OnStatusApplied;OnStatusRemoved"
// data "BoostConditions" "IF(HasObscuredState(ObscuredState.Clear, context.Source))"
data "BoostConditions" "HasObscuredState(ObscuredState.Clear,context.Source)"

new entry "CSS_Lathander_Pass_IlluminateConc2" 
type "PassiveData"
using "CSS_Lathander_Pass_IlluminateConc2"
// data "StatsFunctorContext" "OnObscurityChanged;OnCreate"
data "StatsFunctorContext" ""
data "BoostContext" "OnObscurityChanged;OnEquip;OnCreate;OnAttacked;OnMovedDistance;OnStatusApplied;OnStatusRemoved"
// data "BoostConditions" "IF(not HasObscuredState(ObscuredState.Clear, context.Source))"
data "BoostConditions" "not HasObscuredState(ObscuredState.Clear,context.Source)"

// ApplyStatus(TURNED, 100, 3) needs to have SWAP as the first parameter as otherwise it turns yourself lmao
new entry "CSS_Lathy_Pass_HolyRebuked"
type "PassiveData"
using "CSS_Lathy_Pass_HolyRebuked"
data "Conditions" "IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit) and (Tagged('UNDEAD', context.Target))"
// data "StatsFunctors" "ApplyStatus(TURNED, 100, 3)"
data "StatsFunctors" "ApplyStatus(SWAP,TURNED, 100, 3)"

// ==================================== Helm's Armoury fixes ====================================
// Fixes Faithguard +2 AC remaining on target even if they no longer have Shield of Faith

new entry "CSS_HelmArmory_Pass_Faithguard"
type "PassiveData"
using "CSS_HelmArmory_Pass_Faithguard"
// // data "Description" "h05537877g5021g472dgbb5aga7e3c95f2f5a;1"
// You gain an additional +[1] to &lt;LSTag Tooltip="ArmourClass"&gt;Armour Class&lt;/LSTag&gt; when &lt;LSTag Type="Status" Tooltip="SHIELD_OF_FAITH"&gt;Shield of Faith&lt;/LSTag&gt; is active.
data "Description" "h5259232cg94bcg4f1fg86cag49bd2775aea0"
// data "DescriptionParams" "2"
data "StatsFunctors" "ApplyStatus(HELMARMORY_FAITHGUARD,100,-1)"
// data "Boosts" "AC(2)"
data "Boosts" ""

// New status
new entry "HELMARMORY_FAITHGUARD"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h96487335ga28eg4d11ga040g3988f3187acc;1"
data "Description" "h433f9e7cg1f4dg4680ga58ag1299b22eca8e;1"
data "DescriptionParams" "2"
data "Icon" "Spell_Abjuration_ShieldOfFaith"
data "StackId" "HELM_FAITHGUARD"
data "StackType" ""
data "Boosts" "AC(2)"
data "Passives" ""
data "RemoveConditions" "StatusId('SHIELD_OF_FAITH')"
data "RemoveEvents" "OnStatusRemoved"

// Additional loca changes

new entry "CSS_HelmArmor_Pass_DivineVigilance"
type "PassiveData"
using "CSS_HelmArmor_Pass_DivineVigilance"
// data "Description" "hd83228eagef0ag4a52gb1e1g7f9b3d4256fb;1"
// You gain a +3 bonus to Initiative Rolls and have &lt;LSTag Tooltip="Advantage"&gt;Advantage&lt;/LSTag&gt; on Perception &lt;LSTag Tooltip="AbilityCheck"&gt;Checks&lt;/LSTag&gt;.
data "Description" "ha910c197g7b7ag443dga5cagace2a219dde8"

new entry "CSS_HelmArmor_Pass_Weavebane"
type "PassiveData"
using "CSS_HelmArmor_Pass_Weavebane"
// data "Description" "hee585df0g25c1g412dg84d4gfbdc30b31a36;1"
// You have &lt;LSTag Tooltip="Advantage"&gt;Advantage&lt;/LSTag&gt; on &lt;LSTag Tooltip="SavingThrow"&gt;Saving Throws&lt;/LSTag&gt; against spells. This weapon deals an additional [1] to targets &lt;LSTag Tooltip="Concentration"&gt;Concentrating&lt;/LSTag&gt; on a spell.
data "Description" "h26e9271ag521dg49begb54eg511971cdde17"
// data "DescriptionParams" "DealDamage(1d6,Force)"

new entry "CSS_HelmArmory_Pass_ShieldHeal"
type "PassiveData"
using "CSS_HelmArmory_Pass_ShieldHeal"
// data "Description" "h321e8eddg3384g4f8cg9088g1e21f99936ec"
// Landing an attack on a target heals allies for [1] in a [2] radius around you. This effect can only occur once per turn.
data "Description" "h02da00cdgac67g45f4g8516g806b0ee900b7"
// data "DescriptionParams" "RegainHitPoints(1d4);Distance(9)"